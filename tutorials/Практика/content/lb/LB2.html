<!-- (C) 2017 04 Rozum Halina, BSUIR -->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//RU">
<HTML>
<HEAD>
<LINK rel=stylesheet href="../../../Оболочка/css/style.css" type=text/css>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8">
<META HTTP-EQUIV="Content-Language" CONTENT="ru">
<title>LB2 дисциплины  &quot;ОПИС&quot;</title>
<base target="_top">
</HEAD><BODY>
<table width="100%" border="0" cellpadding="0" cellspacing="3" background="../../../Оболочка/images/background.jpg">
  <tr>
    <td width="13%" rowspan=3 align="center" ><img src="../../../Оболочка/images/logo_new.jpg" width=117 align="middle"></td>
  <tr>
  <td width="70%" colspan=2 align="center" valign="middle">
               <H1 align="center">электронный ресурс по учебной дисциплине<BR>
        &quot;ОСНОВЫ ПРОЕКТИРОВАНИЯ ИНФОРМАЦИОННЫХ СИСТЕМ&quot;<BR>
         для направления специальности: </H1> 1-40 05 01-09 &quot;Информационные системы и технологии (в обеспечении промышленной безопасности)&quot;
                </td>
    <td width="12%" rowspan=3 align="center" >&nbsp;</td>
  <Tr>
    <td align=center colspan=2><var class="normal"><A HREF="../../../index.html">Оглавление</A> |
  <A HREF="../../../Программа/programm.html" TITLE="Программа курса (Откроется в новом окне)">Программа</A> |
  <A HREF="../../../Теория/theory.html">Теория</a> |
              <strong>Практика</strong> |
  <A HREF="../../../Контроль_знаний/test.html">Контроль знаний</A> |
  <A HREF="../../../Об авторах/author.html">Об авторах</A></var> </td>
  <tr>
</table>
<table style="margin:0 auto;" width="90%" border="0" cellpadding="0" cellspacing="0">
<td><A HREF="../../../Практика/practice.html">Практика</A>
                  <p><b>ЛАБОРАТОРНАЯ  РАБОТА №2</b></p>

<div class=WordSection11>

<p class=MsoNormal align=center style='margin-bottom:0cm;margin-bottom:.0001pt;
text-align:center;line-height:normal'><b><span style='font-size:14.0pt;
font-family:"Times New Roman","serif";text-transform:uppercase'>ЦЕЛОЧИСЛЕННЫЕ АРИФМЕТИЧЕСКИЕ ОПЕРАЦИИ. ОБРАБОТКА МАССИВОВ ДННЫХ</span></b></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><b><span
style='font-size:12.0pt;mso-fareast-font-family:Helvetica-BoldOblique;
mso-bidi-font-family:"Times New Roman";mso-bidi-font-style:italic'>Цель работы</span></b><span
style='font-size:12.0pt;mso-fareast-font-family:Helvetica-BoldOblique;
mso-bidi-font-family:"Times New Roman";mso-bidi-font-weight:bold;mso-bidi-font-style:
italic'>: ознакомиться с арифметическими операциями над целочисленными данными, обработкой массивов чисел, ознакомиться с правилами оформления ассемблерных процедур..<o:p></o:p></span></p>


<p class=MsoNormal align=center style='text-align:center;mso-layout-grid-align:
none;text-autospace:none'><b><span style='font-size:12.0pt;mso-fareast-font-family:
Helvetica-BoldOblique;mso-bidi-font-family:"Times New Roman";mso-bidi-font-style:
italic'>Теоретические сведения<o:p></o:p></span></b><br></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
style='font-size:12.0pt;mso-fareast-font-family:Helvetica-BoldOblique;
mso-bidi-font-family:"Times New Roman";mso-bidi-font-style:italic'>Для выполнения работы требуется рассмотреть следующие элементы языка ассемблера:<br>
<br><b>1. Арифметические операции над целыми числами.</b><br>

Арифметические операции над целыми числами в двоичной арифметике выполняются с помощью следующих команд:<br>
<ul><li>
команды сложения (ADD, ADC):</li>

ADD приемник, источник<br>

Команда ADD выполняет арифметическое сложение приемника и источника, помещает сумму в приемник, не изменяя содержимое источника. Приемник может быть регистром или переменной, источник может быть числом, регистром или переменной, но нельзя использовать переменную одновременно и для источника, и для приемника. Команда ADD никак не различает числа со знаком и без знака, но, употребляя значения флагов CF (перенос при сложении чисел без знака), OF (перенос при сложении чисел со знаком) и SF (знак результата), можно использовать ее и для тех, и для других.<br>
<br>
ADC приемник, источник<br>
<br>
Команда ADC во всем аналогична ADD, кроме того, что она выполняет арифметическое сложение приемника, источника и флага СF. Пара команд ADD/ADC используется для сложения чисел повышенной точности.<br>
<li>
команды вычитания (SUB, SBB):</li><br>
<br>
SUB приемник, источник<br>
<br>
Команда SUB вычитает источник из приемника и помещает разность в приемник. Приемник может быть регистром или переменной, источник может быть числом, регистром или переменной, но нельзя использовать переменную одновременно и для источника, и для приемника. Точно так же, как и команда ADD, SUB не делает различий между числами со знаком и без знака, но флаги позволяют использовать ее как для тех, так и для других.<br>
<br>
SBB приемник, источник<br>
<br>
Команда SBB во всем аналогична SUB, кроме того, что она вычитает из приемника значение источника и дополнительно вычитает значение флага CF.<br>
<li>
команды умножения (MUL, IMUL):</li>
<br><b>
MUL источник</b><br></ul></span></p>
<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
style='font-size:12.0pt;mso-fareast-font-family:Helvetica-BoldOblique;
mso-bidi-font-family:"Times New Roman";mso-bidi-font-style:italic'>
Команда MUL выполняет умножение содержимого источника (регистр или переменная) и регистра AL, АХ, ЕАХ (в зависимости от размера источника или оператора PTR) и помещает результат в АХ, DX:AX, EDX:EAX соответственно. При умножении 8-битовых операндов результат всегда помещается в регистр AX. При умножении 16-битовых данных результат, который может быть длиною до 32 бит, помещается в пару регистров: в регистре DX содержатся старшие 16-бит, а в регистре AX – младшие 16-бит. Если старшая половина результата (АН, DX, EDX) содержит только нули (результат целиком поместился в младшую половину), то флаги CF и OF устанавливаются в 0, иначе – в 1. Значение остальных флагов (SF, ZF, AF и PF) не определено.<br>
<br><b>
IMUL ...</b><br>
<br>
Команда IMUL выполняет умножение с учетом знака. Эта команда имеет три формы, различающиеся числом операндов:<br>

a) IMUL источник: источник (регистр или переменная) умножается на AL, АХ или ЕАХ (в зависимости от размера операнда), и результат располагается в АХ, DX:AX или EDX:EAX соответственно.<br>

b) IMUL приемник, источник: источник (число, регистр или переменная) умножается на приемник (регистр), и результат заносится в приемник.<br>

c) IMUL приемник, источник1, источник2: источник 1 (регистр или переменная) умножается на источник 2 (число), и результат заносится в приемник (регистр).<br>

Во всех трех вариантах считается, что результат может занимать в два раза больше места, чем размер источника. В первом случае приемник автоматически оказывается достаточно большим, но во втором и третьем случаях могут произойти переполнение и потеря старших бит результата. Флаги OF и CF будут равны единице, если это произошло, и нулю, если результат умножения поместился целиком в приемник (во втором и третьем случаях) или в младшую половину приемника (в первом случае). Значения флагов SF, ZF, AF и PF после команды IMUL не определены.<br>
<br><b>
Kоманды деления (DIV, IDIV):</b><br>
<br>
DIV источник<br>
<br>
Команда DIV выполняет целочисленное деление без знака AL, АХ или ЕАХ (в зависимости от размера источника) на источник (регистр или переменная) и помещает результат в AL, АХ или ЕАХ, а остаток — в АН, DX или EDX соответственно. Результат всегда округляется в сторону нуля, абсолютное значение остатка всегда меньше абсолютного значения делителя.<br>

При 8-битном источнике (байт), используется 16-битовое делимое (AX). В результате деления получается два числа: частное помещается в регистр AL, а остаток – в AH.<br>

При 16-битовом делителе (слово), используется 32-битовое делимое (DX:AX, причем DX содержит старшую значимую часть, а регистр AX – младшую). Команда деления помещает частное в регистр AX, а остаток в DX.<br>

Значения флагов CF, OF, SF, ZF, AF и PF после этой команды не определены, а переполнение (если частное больше того, что может быть помещено в регистр результата (255 для байтового деления и 65535 для деления слов)) или деление на ноль вызывает прерывание 0h.<br>
<br><b>
IDIV источник</b><br>
<br>
Команда IDIV выполняет целочисленное деление со знаком AL, АХ или ЕАХ (в зависимости от размера источника) на источник (регистр или переменная) и помещает результат в AL, АХ или ЕАХ, а остаток — в АН, DX или EDX соответственно. В остальном IDIV соответствует DIV.<br>

Ниже приведен фрагмент программы, выполняющей вычисление формулы X = 1 – (A * 2 + B * C) / (D – 3) , где параметры X, A, B, C и D – 16-ти битовые целые знаковые числа:<br>

        ...<br>

        MOV AX,2    ; AX = 2<br>

        IMUL A      ; DX:AX = A * 2<br>

        MOV BX,DX<br>

        MOV CX,AX   ; BX:CX = A * 2<br>

        MOV AX,B<br>

        IMUL C      ; DX:AX = B * C<br>

        ADD AX,CX<br>

        ADC DX,BX   ; DX:AX = A * 2 + B * C<br>

        MOV CX,D<br>

        SUB CX,3    ; CX = D - 3<br>

        IDIV CX     ; AX = (A * 2 + B * C)/(D - 3)<br>

        NEG AX      ; AX = -AX<br>

        INC AX      ; AX = AX + 1<br>

        MOV X,AX    ; X = результат<br>

        ...<br>
<br><b>
2. Логические побитовые операции над целыми числами.</b><br>
<br>
Логические побитовые операции над целыми числами выполняются с помощью следующих команд:<br>

<b>Логическое И (AND):</b><br>
<br>
AND приемник, источник<br>
<br>
Команда AND выполняет «логическое И» над приемником (регистр или переменная) и источником (число, регистр или переменная) и помещает результат в приемник. Источник и приемник не могут быть переменными одновременно. Флаги OF и CF обнуляются, SF, ZF и PF устанавливаются в соответствии с результатом, AF – не определен.<br>
<br><b>
Логическое ИЛИ (OR):</b><br>
<br>
OR приемник, источник<br>
<br>
Команда AND выполняет «логическое ИЛИ» над приемником (регистр или переменная) и источником (число, регистр или переменная) и помещает результат в приемник. Источник и приемник не могут быть переменными одновременно. Флаги OF и CF обнуляются, SF, ZF и PF устанавливаются в соответствии с результатом, AF – не определен.<br>
<br><b>
Логическое исключающее ИЛИ (XOR):</b><br>
<br>
XOR приемник, источник<br>
<br>
Команда AND выполняет «логическое И» над приемником (регистр или переменная) и источником (число, регистр или переменная) и помещает результат в приемник. Источник и приемник не могут быть переменными одновременно. Команда XOR часто используется для обнуления регистра:<br>
<br>
        XOR AX, AX   ; обнуление AX<br>
<br>
-- инверсия (NOT):<br>
<br>
NOT приемник<br>
<br>
Команда NOT выполняет инверсию бит приемника (регистр или переменная). Флаги не затрагиваются.<br>
<br><b>
3. Процедуры.</b><br>

Процедура в ассемблере – это аналог функции C, процедур и функций PASCAL и т.п. Ассемблер не накладывает на процедуры никаких ограничений – на любой адрес программы можно передать управление командой CALL, и оно вернется к вызвавшей процедуре, как только встретится команда RET. Такая свобода выражения легко может приводить к трудночитаемым программам, и в язык ассемблера были включены директивы логического оформления процедур:<br>
метка PROC язык тип USES регистры<br>
        ...<br>
        RET<br>
метка ENDP<br>
<br>
Описание операндов PROC:<br>
<ul><li>метка – название процедуры.</li>
<li>тип может принимать значения NEAR и FAR, и если он указан, все команды RET в теле процедуры будут заменены соответственно на RETN и RETF. По умолчанию подразумевается, что процедура имеет тип NEAR в моделях памяти TINY, SMALL и COMPACT.</li>
<li>язык действует аналогично такому же операнду директивы .MODEL, определяя взаимодействие процедуры с языками высокого уровня. В некоторых ассемблерах директива PROC позволяет также считать параметры, передаваемые вызывающей программой. В этом случае указание языка необходимо, так как различные языки высокого уровня используют разные способы передачи параметров.</li>
<li>USES регистры – список регистров, значения которых изменяет процедура. Ассемблер помещает в начало процедуры набор команд PUSH, а перед командой RET – набор команд POP, так что значения перечисленных регистров будут восстановлены.
</li></ul></span></p>
<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
style='font-size:12.0pt;mso-fareast-font-family:Helvetica-BoldOblique;
mso-bidi-font-family:"Times New Roman";mso-bidi-font-style:italic'>
Параметры в процедуры можно передавать в регистрах, в глобальных переменных, в стеке, в потоке кода, в блоке параметров. Одна из простых передач – передача параметров через регистры:<br>
<br>
        mov ax,word ptr value   ; сделать копию значения<br>
<br>
        call procedure          ; вызвать процедуру<br>
<br>
При передаче параметров в стеке, для чтения параметров из стека в процедуре обычно используют не команду POP, а регистр ВР, в который помещают адрес вершины стека после входа в процедуру:<br>
        push parameter1 ; поместить параметр 1 в стек<br>
        push parameter2 ; поместить параметр 2 в стек<br>
        call procedure<br>
        add  sp,4       ; освободить стек от параметров<br>
        ...<br>
procedure proc near<br>
        push bp         ; сохранить BP<br>
        mov bp,sp       ; BP = вершина стека<br>
        ...             ; команды, которые могут использовать стек<br>
        mov ax,[bp+4]   ; считать параметр 2<br>
     ; его адрес в сегменте стека ВР+4, потому что при выполнении<br>
     ; команды CALL в стек поместили адрес возврата - 2 байта<br>
     ; для процедуры типа NEAR (или 4 - для FAR), а потом еще и<br>
     ; ВР - 2 байта<br>
        mov bx,[bp+6]   ; считать параметр 1<br>
        ...             ; остальные команды<br>
        рор bp          ; восстановить BP<br>
        ret             ; возврат из процедуры<br>
procedure endp<br>
<br>
Для удобства ссылок на параметры, переданные в стеке, внутри функции иногда используют директивы EQU, чтобы не писать каждый раз точное смещение параметра от начала активационной записи (то есть от ВР), например, так:<br>
        push X<br>
        push Y<br>
        push Z<br>
        call procedure<br>
        ...<br>
procedure proc near<br>
        param_z equ [bp+8]<br>
        param_y equ [bp+6]<br>
        param_x equ [bp+4]<br>
        push bp<br>
        mov bp,sp<br>
        ...             ; команды, которые могут использовать стек<br>
        mov ax,param_x  ; считать параметр X<br>
        ...             ; остальные команды процедуры<br>
        pop bp<br>
        ret 6           ; возврат с очисткой стека в процедуре<br>
func endp<br></span></p>


<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
style='font-size:12.0pt;mso-fareast-font-family:Helvetica-BoldOblique;
mso-bidi-font-family:"Times New Roman";mso-bidi-font-style:italic'>
Контрольные вопросы<br>

1.     Проблемы ввода числа в ассемблерных программах (знак числа, переполнение при вводе).<br>

2.     Арифметические операции над целыми числами.<br>

3.     Переполнение при арифметических операциях.<br>

4.     Логические побитовые операции над целыми числами.<br>

5.     Процедуры в ассемблере.<br>
</span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
style='font-size:12.0pt;mso-fareast-font-family:Helvetica-BoldOblique;
mso-bidi-font-family:"Times New Roman";mso-bidi-font-style:italic'>
Дополнительные требования к выполнению работы<br>

1.     Вид буфера для хранения массива и адресация для доступа к его элементам выбрать самостоятельно.<br>

2.     Числовые данные вводятся с клавиатуры в виде строк символов (по умолчанию используется десятичная система счисления), при этом требуется производить проверку на переполнение разрядной сетки числа (по умолчанию используются знаковые 16-ти битные данные), для знаковых данных – знак требуется хранить в представлении самого числа (в дополнительном коде).<br>

3.     При вводе числовых массивов можно указать число вводимых элементов.<br>

4.     При операциях с целыми числами требуется проверять полученный результат на возникновение ошибок и переполнений.<br>

5.     Формирование чисел с дробной частью по условию задачи выполнять в виде массива символов на основе только целочисленных арифметических операций (без использования FPU). Выполнить округление полученного числа до N-го символа дробной части.<br>

6.     Для лучшего оформления программы ввод-вывод чисел и часто повторяющиеся действия реализовать в виде процедур.<br>

7.     Старт программы, ввод-вывод данных и обработку ошибок оформлять выводом в консоли поясняющих строк.<br></span></p>


<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
style='font-size:12.0pt;mso-fareast-font-family:Helvetica-BoldOblique;
mso-bidi-font-family:"Times New Roman";mso-bidi-font-style:italic'>
Варианты заданий<br>
<ol><li>
Перевести число из одной системы счисления в другую (системы счисления задаются до ввода-вывода числа в диапазоне [2..16]).</li>
<li>
Выполнить набор арифметических операций над двумя целыми числами, представленными в 10-ной системе счисления.</li>
<li>Выполнить набор операций над двумя целыми числами.</li>
<li>Ввести массив целых чисел размерностью 30 элементов. Вычислить среднее значение элементов массива.</li>
<li>Ввести массив целых чисел размерностью 30 элементов. Найти наиболее часто встречающееся число.</li>
<li>Ввести массив целых чисел размерностью 30 элементов. Нормализовать значения элементов по максимальному числу в массиве (каждый элемент массива разделить на число с максимальным значением).</li>
<li>Ввести массив целых чисел размерностью 30 элементов. Найти вид последовательности чисел (возрастающая, убывающая, случайная).</li>
<li>Ввести матрицу целых чисел размерностью 5х6 элементов. Найти суммы элементов строк.</li>
<li>Ввести матрицу целых чисел размерностью 5х6 элементов. Найти произведения элементов столбцов.</li>
<li>Ввести матрицу целых чисел размерностью 5х6 элементов. Найти номера строк с максимальным произведением элементов.</li>
<li>Ввести матрицу целых чисел размерностью 5х6 элементов. Найти номера столбцов с минимальной суммой элементов.</li>
<li>Ввести матрицу целых чисел размерностью 5х6 элементов. Отсортировать строки по возрастанию значений элементов.</li></ol></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
style='font-size:12.0pt;mso-bidi-font-family:"Times New Roman"'>Для получения
задания на лабораторную работу обратиться к преподавателю.<o:p></o:p></span></p>



</div>

<A HREF="../../../Практика/practice.html">Практика</A>
        <div style="position: fixed; right: 0; bottom: 0">
  <a href="#" id="toTop"><img src="../../../Оболочка/js/to_top_ye.GIF" width="32" height="32" border="0" align="absmiddle"></a> </div>
                <p>&nbsp;</p>
        </table>
<table width="100%" height=25px border="0" cellpadding="0" cellspacing="3" bordercolor="#316AC5" background="../../../Оболочка/images/background.jpg">
  <tr >
  <td align=center><var><B><b>(С)  БГУИР</b></var></td>
  </tr>
</table>
</BODY></HTML>
